{"ast":null,"code":"import _objectSpread from\"C:/Users/hussa/Desktop/greencart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import api from'../services/api';import DataTable from'../components/DataTable';import Navigation from'../components/Navigation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DriversPage=()=>{const navigate=useNavigate();const[drivers,setDrivers]=useState([]);const[editingDriver,setEditingDriver]=useState(null);const[formData,setFormData]=useState({name:'',currentShiftHours:0});const[error,setError]=useState('');useEffect(()=>{fetchDrivers();},[]);const fetchDrivers=async()=>{try{const response=await api.get('/drivers');setDrivers(response.data);}catch(error){setError('Failed to fetch drivers');}};const handleSubmit=async e=>{e.preventDefault();try{if(editingDriver){await api.put(\"/drivers/\".concat(editingDriver._id),formData);}else{await api.post('/drivers',formData);}setEditingDriver(null);setFormData({name:'',currentShiftHours:0});fetchDrivers();}catch(error){setError('Failed to save driver');}};const handleEdit=driver=>{setEditingDriver(driver);setFormData({name:driver.name,currentShiftHours:driver.currentShiftHours});};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this driver?')){try{await api.delete(\"/drivers/\".concat(id));fetchDrivers();}catch(error){setError('Failed to delete driver');}}};const columns=[{key:'name',label:'Name'},{key:'currentShiftHours',label:'Current Shift Hours'},{key:'isFatigued',label:'Fatigue Status',render:driver=>driver.isFatigued?'Fatigued':'Normal'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"drivers-page\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:{padding:'8px 16px',marginRight:'20px',backgroundColor:'#f0f0f0',border:'1px solid #ddd',borderRadius:'4px',cursor:'pointer'},children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{children:editingDriver?'Edit Driver':'Add New Driver'})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"driver-form\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Shift Hours:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.currentShiftHours,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{currentShiftHours:parseFloat(e.target.value)})),min:\"0\",step:\"0.5\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editingDriver?'Update Driver':'Add Driver'}),editingDriver&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditingDriver(null);setFormData({name:'',currentShiftHours:0});},children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Drivers List\"}),/*#__PURE__*/_jsx(DataTable,{data:drivers,columns:columns,onEdit:handleEdit,onDelete:handleDelete})]})]});};export default DriversPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","api","DataTable","Navigation","jsx","_jsx","jsxs","_jsxs","DriversPage","navigate","drivers","setDrivers","editingDriver","setEditingDriver","formData","setFormData","name","currentShiftHours","error","setError","fetchDrivers","response","get","data","handleSubmit","e","preventDefault","put","concat","_id","post","handleEdit","driver","handleDelete","id","window","confirm","delete","columns","key","label","render","isFatigued","className","children","style","display","alignItems","marginBottom","onClick","padding","marginRight","backgroundColor","border","borderRadius","cursor","onSubmit","type","value","onChange","_objectSpread","target","required","parseFloat","min","step","onEdit","onDelete"],"sources":["C:/Users/hussa/Desktop/greencart/frontend/src/pages/DriversPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../services/api';\r\nimport DataTable from '../components/DataTable';\r\nimport Navigation from '../components/Navigation';\r\n\r\nconst DriversPage = () => {\r\n  const navigate = useNavigate();\r\n  const [drivers, setDrivers] = useState([]);\r\n  const [editingDriver, setEditingDriver] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    currentShiftHours: 0,\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchDrivers();\r\n  }, []);\r\n\r\n  const fetchDrivers = async () => {\r\n    try {\r\n      const response = await api.get('/drivers');\r\n      setDrivers(response.data);\r\n    } catch (error) {\r\n      setError('Failed to fetch drivers');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingDriver) {\r\n        await api.put(`/drivers/${editingDriver._id}`, formData);\r\n      } else {\r\n        await api.post('/drivers', formData);\r\n      }\r\n      setEditingDriver(null);\r\n      setFormData({ name: '', currentShiftHours: 0 });\r\n      fetchDrivers();\r\n    } catch (error) {\r\n      setError('Failed to save driver');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (driver) => {\r\n    setEditingDriver(driver);\r\n    setFormData({\r\n      name: driver.name,\r\n      currentShiftHours: driver.currentShiftHours,\r\n    });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this driver?')) {\r\n      try {\r\n        await api.delete(`/drivers/${id}`);\r\n        fetchDrivers();\r\n      } catch (error) {\r\n        setError('Failed to delete driver');\r\n      }\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    { key: 'name', label: 'Name' },\r\n    { key: 'currentShiftHours', label: 'Current Shift Hours' },\r\n    {\r\n      key: 'isFatigued',\r\n      label: 'Fatigue Status',\r\n      render: (driver) => (driver.isFatigued ? 'Fatigued' : 'Normal'),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"drivers-page\">\r\n      <Navigation />\r\n      <div className=\"content\">\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\r\n          <button \r\n            onClick={() => navigate('/')}\r\n            style={{\r\n              padding: '8px 16px',\r\n              marginRight: '20px',\r\n              backgroundColor: '#f0f0f0',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            ‚Üê Back to Dashboard\r\n          </button>\r\n          <h2>{editingDriver ? 'Edit Driver' : 'Add New Driver'}</h2>\r\n        </div>\r\n        {error && <div className=\"error\">{error}</div>}\r\n        \r\n        <form onSubmit={handleSubmit} className=\"driver-form\">\r\n          <div>\r\n            <label>Name:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Current Shift Hours:</label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.currentShiftHours}\r\n              onChange={(e) => setFormData({\r\n                ...formData,\r\n                currentShiftHours: parseFloat(e.target.value)\r\n              })}\r\n              min=\"0\"\r\n              step=\"0.5\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-buttons\">\r\n            <button type=\"submit\">\r\n              {editingDriver ? 'Update Driver' : 'Add Driver'}\r\n            </button>\r\n            {editingDriver && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setEditingDriver(null);\r\n                  setFormData({ name: '', currentShiftHours: 0 });\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n\r\n        <h2>Drivers List</h2>\r\n        <DataTable\r\n          data={drivers}\r\n          columns={columns}\r\n          onEdit={handleEdit}\r\n          onDelete={handleDelete}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DriversPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}